<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wedding Budget Planner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Pretendard', sans-serif; }
    </style>
</head>
<body class="bg-gray-50 text-gray-900 min-h-screen pb-12">

<header class="bg-white border-b border-gray-200 sticky top-0 z-10">
    <div class="max-w-5xl mx-auto px-4 py-6 flex justify-between items-center">
        <h1 class="text-2xl font-bold text-gray-800">ğŸ’ ê²°í˜¼ ì˜ˆì‚° ê´€ë¦¬ í˜„í™© - 8ì›” ê¸°ì¤€</h1>
        <div id="last-update" class="text-sm text-gray-500"></div>
    </div>
</header>

<main class="max-w-5xl mx-auto px-4 mt-8">

    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8 text-center md:text-left">
        <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100">
            <p class="text-sm text-gray-500 mb-1">ì´ ì˜ˆì‚° (ì„¤ì • ê¸°ì¤€)</p>
            <p id="stat-total-budget" class="text-2xl font-bold text-gray-900">â‚©0</p>
        </div>
        <div class="bg-blue-50 p-6 rounded-2xl shadow-sm border border-blue-100">
            <p class="text-sm text-blue-600 mb-1">í˜„ì¬ ì‹¤ì œ ì§€ì¶œì•¡</p>
            <p id="stat-total-paid" class="text-2xl font-bold text-blue-700">â‚©0</p>
        </div>
        <div class="bg-red-50 p-6 rounded-2xl shadow-sm border border-red-100">
            <p class="text-sm text-red-600 mb-1">ë‚¨ì€ ê²°ì œ í•„ìš”ì•¡</p>
            <p id="stat-total-balance" class="text-2xl font-bold text-red-700">â‚©0</p>
        </div>
    </div>

    <div class="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden">
        <div class="overflow-x-auto">
            <table class="w-full text-left border-collapse">
                <thead>
                <tr class="bg-gray-50 border-b border-gray-200 text-sm">
                    <th class="px-6 py-4 font-semibold text-gray-600">ì¹´í…Œê³ ë¦¬</th>
                    <th class="px-6 py-4 font-semibold text-gray-600">ì˜ˆì‚°</th>
                    <th class="px-6 py-4 font-semibold text-gray-600">ê³„ì‚°(ì§€ì¶œ)</th>
                    <th class="px-6 py-4 font-semibold text-gray-600">ì°¨ì•¡</th>
                    <th class="px-6 py-4 font-semibold text-gray-600">ë¹„ê³ </th>
                </tr>
                </thead>
                <tbody id="budget-table-body" class="divide-y divide-gray-100">
                </tbody>
            </table>
        </div>
    </div>

    <div class="mt-8 p-4 bg-gray-100 rounded-xl text-sm text-gray-600">
        * 'ë¹„ê³ ' ë‚´ìš©ì´ ìˆëŠ” í•­ëª©ì´ë‚˜ ìˆ˜ì¹˜ê°€ ì—†ëŠ” í•­ëª©ì€ ì´ê³„ ì‚°ì • ì‹œ ìœ ë™ì ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    </div>
</main>

<script>
    // 1. ì—¬ê¸°ì— JSON ë°ì´í„°ë¥¼ ì…ë ¥í•˜ì„¸ìš”
    const weddingData = [
  {
    "ì¹´í…Œê³ ë¦¬": "8/23 íŒ¨í‚¤ì§€",
    "ì˜ˆì‚°": "â‚©4,400,000.00",
    "ê³„ì‚°": "â‚©1,000,000.00",
    "ì°¨ì•¡": "â‚©3,400,000.00",
    "ë¹„ê³ ": null
  },
  {
    "ì¹´í…Œê³ ë¦¬": "ìƒí™” ì¥ì‹",
    "ì˜ˆì‚°": "â‚©1,600,000.00",
    "ê³„ì‚°": null,
    "ì°¨ì•¡": null,
    "ë¹„ê³ ": null
  },
  {
    "ì¹´í…Œê³ ë¦¬": "ìŠ¤íŠœë””ì˜¤ (ì„ íƒ)",
    "ì˜ˆì‚°": "â‚©800,000.00",
    "ê³„ì‚°": null,
    "ì°¨ì•¡": null,
    "ë¹„ê³ ": null
  },
  {
    "ì¹´í…Œê³ ë¦¬": "ì‹ì‚¬",
    "ì˜ˆì‚°": "â‚©8,800,000.00",
    "ê³„ì‚°": null,
    "ì°¨ì•¡": null,
    "ë¹„ê³ ": null
  },
  {
    "ì¹´í…Œê³ ë¦¬": "ì „ë¬¸ì‚¬íšŒì",
    "ì˜ˆì‚°": "â‚©350,000.00",
    "ê³„ì‚°": null,
    "ì°¨ì•¡": null,
    "ë¹„ê³ ": null
  },
  {
    "ì¹´í…Œê³ ë¦¬": "í•œë³µ",
    "ì˜ˆì‚°": "â‚©500,000.00",
    "ê³„ì‚°": null,
    "ì°¨ì•¡": null,
    "ë¹„ê³ ": null
  },
  {
    "ì¹´í…Œê³ ë¦¬": "DVD",
    "ì˜ˆì‚°": null,
    "ê³„ì‚°": null,
    "ì°¨ì•¡": null,
    "ë¹„ê³ ": "ì˜ˆì•½ì‹¤ ë¬¸ì˜"
  },
  {
    "ì¹´í…Œê³ ë¦¬": "ìŠ¤ëƒ…",
    "ì˜ˆì‚°": null,
    "ê³„ì‚°": null,
    "ì°¨ì•¡": null,
    "ë¹„ê³ ": "ì˜ˆì•½ì‹¤ ë¬¸ì˜"
  },
  {
    "ì¹´í…Œê³ ë¦¬": "í”Œë¼ì›Œ ìƒ¤ì›Œ",
    "ì˜ˆì‚°": "â‚©300,000.00",
    "ê³„ì‚°": null,
    "ì°¨ì•¡": null,
    "ë¹„ê³ ": null
  },
  {
    "ì¹´í…Œê³ ë¦¬": "í”¼ë¶€ê´€ë¦¬",
    "ì˜ˆì‚°": null,
    "ê³„ì‚°": null,
    "ì°¨ì•¡": null,
    "ë¹„ê³ ": null
  },
  {
    "ì¹´í…Œê³ ë¦¬": "ì‹ í˜¼ì—¬í–‰",
    "ì˜ˆì‚°": null,
    "ê³„ì‚°": null,
    "ì°¨ì•¡": null,
    "ë¹„ê³ ": null
  },
  {
    "ì¹´í…Œê³ ë¦¬": "ì•„ì´í° ìŠ¤ëƒ…",
    "ì˜ˆì‚°": null,
    "ê³„ì‚°": null,
    "ì°¨ì•¡": null,
    "ë¹„ê³ ": "ë³„ë„ ì•Œì•„ë´ì•¼í•¨"
  }
];

    // 2. ë Œë”ë§ í•¨ìˆ˜
    function renderBudget() {
        const tbody = document.getElementById('budget-table-body');
        let totalBudget = 0;
        let totalPaid = 0;
        let totalBalance = 0;

        // ë¬¸ìì—´ ê¸ˆì•¡ì„ ìˆ«ìë¡œ ë³€í™˜í•˜ëŠ” í—¬í¼ (â‚©1,000.00 -> 1000)
        const parseMoney = (str) => {
            if (!str) return 0;
            return parseFloat(str.replace(/[^0-9.-]+/g, ""));
        };

        // ì²œë‹¨ìœ„ ì½¤ë§ˆ í¬ë§· í—¬í¼
        const formatMoney = (num) => {
            if (num === 0) return "-";
            return "â‚©" + num.toLocaleString('ko-KR');
        };

        weddingData.forEach(item => {
            const b = parseMoney(item["ì˜ˆì‚°"]);
            const p = parseMoney(item["ê³„ì‚°"]);
            const c = parseMoney(item["ì°¨ì•¡"]) || (b > 0 && p === 0 ? b : 0);
            const note = item["ë¹„ê³ "] || item["null"]; // JSON í‚¤ ëŒ€ì‘

            totalBudget += b;
            totalPaid += p;
            totalBalance += (p > 0 ? (b - p) : b); // ì§€ì¶œì´ ìˆìœ¼ë©´ ì°¨ì•¡, ì—†ìœ¼ë©´ ì˜ˆì‚° ì „ì²´

            const row = document.createElement('tr');
            row.className = "hover:bg-gray-50 transition-colors";
            row.innerHTML = `
                <td class="px-6 py-4 font-medium">${item["ì¹´í…Œê³ ë¦¬"]}</td>
                <td class="px-6 py-4 text-gray-600">${formatMoney(b)}</td>
                <td class="px-6 py-4 text-blue-600 font-medium">${formatMoney(p)}</td>
                <td class="px-6 py-4 font-semibold">${formatMoney(c)}</td>
                <td class="px-6 py-4 text-sm">
                    ${note ? `<span class="bg-indigo-100 text-indigo-700 px-2 py-1 rounded text-xs font-medium">${note}</span>` : '-'}
                </td>
            `;
            tbody.appendChild(row);
        });

        // ìƒë‹¨ ëŒ€ì‹œë³´ë“œ ì—…ë°ì´íŠ¸
        document.getElementById('stat-total-budget').innerText = formatMoney(totalBudget);
        document.getElementById('stat-total-paid').innerText = formatMoney(totalPaid);
        document.getElementById('stat-total-balance').innerText = formatMoney(totalBudget - totalPaid);

        // ì—…ë°ì´íŠ¸ ë‚ ì§œ í‘œì‹œ
        document.getElementById('last-update').innerText = "Last Update: " + new Date().toLocaleDateString();
    }

    // ì‹¤í–‰
    renderBudget();
</script>
</body>
</html>
